 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/mobile/ios/Podfile b/mobile/ios/Podfile
index bf337aed8c001c01500a208c83615c2d2db257d4..5c2d1d0a2894666fd15138c1a85cacc44e71c530 100644
--- a/mobile/ios/Podfile
+++ b/mobile/ios/Podfile
@@ -38,39 +38,54 @@ target 'BookitGY' do
 
 # @generated begin react-native-maps - expo prebuild (DO NOT MODIFY) sync-e9cc66c360abe50bc66d89fffb3c55b034d7d369
   pod 'react-native-google-maps', path: File.dirname(`node --print "require.resolve('react-native-maps/package.json')"`)
 # @generated end react-native-maps
   config = use_native_modules!(config_command)
 
   use_frameworks! :linkage => podfile_properties['ios.useFrameworks'].to_sym if podfile_properties['ios.useFrameworks']
   use_frameworks! :linkage => ENV['USE_FRAMEWORKS'].to_sym if ENV['USE_FRAMEWORKS']
 
   use_react_native!(
     :path => config[:reactNativePath],
     :hermes_enabled => podfile_properties['expo.jsEngine'] == nil || podfile_properties['expo.jsEngine'] == 'hermes',
     # An absolute path to your application root.
     :app_path => "#{Pod::Config.instance.installation_root}/..",
     :privacy_file_aggregation_enabled => podfile_properties['apple.privacyManifestAggregationEnabled'] != 'false',
   )
 
   post_install do |installer|
     react_native_post_install(
       installer,
       config[:reactNativePath],
       :mac_catalyst_enabled => false,
       :ccache_enabled => ccache_enabled?(podfile_properties),
     )
     # BOOKITGY_PRIVACYINFO_STRIP
-    scripts = Dir.glob(File.join(__dir__, "Pods", "Target Support Files", "Pods-*", "Pods-*-resources.sh"))
+    pods_project = installer.pods_project
+    removed = 0
 
-    scripts.each do |script|
-      next unless File.exist?(script)
-      content = File.read(script)
-      next unless content.include?("PrivacyInfo.xcprivacy")
+    pods_project.targets.each do |t|
+      # PBXAggregateTarget and others may not have resources build phase
+      next unless t.respond_to?(:resources_build_phase)
 
-      filtered = content.lines.reject { |line| line.include?("PrivacyInfo.xcprivacy") }.join
-      File.write(script, filtered)
+      phase = t.resources_build_phase
+      next unless phase && phase.respond_to?(:files) && phase.files
 
-      puts "[BookitGY] Stripped PrivacyInfo.xcprivacy from #{script}"
+      phase.files.to_a.each do |bf|
+        ref = bf.respond_to?(:file_ref) ? bf.file_ref : nil
+        ref_path = ref && ref.respond_to?(:path) ? ref.path : nil
+        next unless ref_path && ref_path.end_with?("PrivacyInfo.xcprivacy")
+
+        # remove build file safely
+        if phase.respond_to?(:remove_build_file)
+          phase.remove_build_file(bf)
+        else
+          phase.files.delete(bf)
+        end
+        removed += 1
+      end
     end
+
+    pods_project.save
+    puts "[BookitGY] Removed #{removed} PrivacyInfo.xcprivacy resource refs from Pods project"
   end
 end
 
EOF
)