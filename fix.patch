 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/backend/tests/test_booking_lists.py b/backend/tests/test_booking_lists.py
index e78f4b88a244e2f46110c41307a00153acec08cd..2f7ae20531fa27802549c0902ee99c13162e2d5e 100644
--- a/backend/tests/test_booking_lists.py
+++ b/backend/tests/test_booking_lists.py
@@ -136,50 +136,98 @@ def test_provider_lists_handle_mixed_confirmed_status_casing(db_session):
             yield session
         finally:
             pass
 
     app.dependency_overrides[get_db] = override_get_db
     app.dependency_overrides[bookings_routes._require_current_provider] = lambda: provider
 
     client = TestClient(app)
 
     try:
         today_resp = client.get("/providers/me/bookings/today")
         assert today_resp.status_code == 200
         today_data = today_resp.json()
         assert [item["id"] for item in today_data] == [today_booking.id]
         assert today_data[0]["status"] == "confirmed"
 
         upcoming_resp = client.get("/providers/me/bookings/upcoming")
         assert upcoming_resp.status_code == 200
         upcoming_data = upcoming_resp.json()
         assert [item["id"] for item in upcoming_data] == [upcoming_booking.id]
         assert upcoming_data[0]["status"] == "confirmed"
     finally:
         app.dependency_overrides = {}
 
 
+@pytest.mark.usefixtures("db_session")
+def test_provider_today_bookings_include_past_end_times(db_session, monkeypatch):
+    session, models, crud = db_session
+    provider, provider_user, customer, service = _create_provider_graph(session, models)
+
+    fake_now = datetime(2024, 1, 2, 15, 0)
+    monkeypatch.setattr(crud, "now_local_naive", lambda: fake_now)
+
+    start_time = datetime(fake_now.year, fake_now.month, fake_now.day, 9, 0)
+    end_time = start_time + timedelta(hours=1)
+
+    booking = _add_booking(
+        session,
+        models,
+        customer=customer,
+        service=service,
+        start_time=start_time,
+        end_time=end_time,
+        status="confirmed",
+    )
+
+    from app import database
+    from app.main import app
+    from app.database import get_db
+    from app.routes import bookings as bookings_routes
+
+    database.Base.metadata.create_all(bind=database.engine)
+
+    def override_get_db():
+        try:
+            yield session
+        finally:
+            pass
+
+    app.dependency_overrides[get_db] = override_get_db
+    app.dependency_overrides[bookings_routes._require_current_provider] = lambda: provider
+
+    client = TestClient(app)
+
+    try:
+        resp = client.get("/providers/me/bookings/today")
+        assert resp.status_code == 200
+        data = resp.json()
+        assert [item["id"] for item in data] == [booking.id]
+    finally:
+        app.dependency_overrides = {}
+
+
 @pytest.mark.usefixtures("db_session")
 def test_provider_bookings_include_all_statuses(db_session):
     session, models, crud = db_session
     provider, provider_user, customer, service = _create_provider_graph(session, models)
 
     now = datetime.utcnow()
     future_start = now + timedelta(hours=2)
     past_start = now - timedelta(days=1)
     cancelled_start = now - timedelta(hours=3)
 
     _add_booking(
         session,
         models,
         customer=customer,
         service=service,
         start_time=future_start,
         end_time=future_start + timedelta(hours=1),
         status="confirmed",
     )
 
     _add_booking(
         session,
         models,
         customer=customer,
         service=service,
 
EOF
)