 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/mobile/App.js b/mobile/App.js
index a54fbaf5652e0f6e6cc35947d9d90a965baf5433..2e6354797c788910ca21bca1dc3a5542a22ff896 100644
--- a/mobile/App.js
+++ b/mobile/App.js
@@ -125,86 +125,85 @@ const toNum = (value) => {
 };
 
 const getDistanceKm = (lat1, lon1, lat2, lon2) => {
   if (lat1 == null || lon1 == null || lat2 == null || lon2 == null) {
     return null;
   }
   const toRad = (value) => (value * Math.PI) / 180;
   const R = 6371;
   const dLat = toRad(lat2 - lat1);
   const dLon = toRad(lon2 - lon1);
   const a =
     Math.sin(dLat / 2) * Math.sin(dLat / 2) +
     Math.cos(toRad(lat1)) *
       Math.cos(toRad(lat2)) *
       Math.sin(dLon / 2) *
       Math.sin(dLon / 2);
   const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
   const distance = R * c;
   return Number.isFinite(distance) ? distance : null;
 };
 
 const getProviderCoords = (provider) => {
   const location = provider?.location;
   const pinnedLocation = provider?.pinned_location ?? provider?.pinnedLocation;
   const coords = provider?.coords;
+  const getCoordsFrom = (source) => {
+    const lat = toNum(source?.lat ?? source?.latitude);
+    const lng = toNum(source?.lng ?? source?.long ?? source?.longitude);
+    if (lat == null || lng == null) return null;
+    return { lat, lng };
+  };
   const lat = toNum(
     provider?.pinned_lat ??
       provider?.pinnedLatitude ??
-      pinnedLocation?.lat ??
-      pinnedLocation?.latitude ??
-      location?.lat ??
-      location?.latitude ??
       provider?.location_lat ??
       provider?.locationLat ??
-      coords?.lat ??
-      coords?.latitude ??
       provider?.latitude ??
       provider?.lat
   );
   const lng = toNum(
     provider?.pinned_lng ??
       provider?.pinned_long ??
       provider?.pinnedLongitude ??
-      pinnedLocation?.lng ??
-      pinnedLocation?.long ??
-      pinnedLocation?.longitude ??
-      location?.lng ??
-      location?.long ??
-      location?.longitude ??
       provider?.location_lng ??
       provider?.locationLng ??
-      coords?.lng ??
-      coords?.long ??
-      coords?.longitude ??
       provider?.longitude ??
       provider?.lng ??
       provider?.lon ??
       provider?.long
   );
-  if (lat == null || lng == null) return null;
-  return { lat, lng };
+  if (lat != null && lng != null) {
+    return { lat, lng };
+  }
+  const fromLocation = getCoordsFrom(location);
+  if (fromLocation) return fromLocation;
+  const fromPinned = getCoordsFrom(pinnedLocation);
+  if (fromPinned) return fromPinned;
+  const fromCoords = getCoordsFrom(coords);
+  if (fromCoords) return fromCoords;
+  return null;
 };
 
 const LEGACY_ACCESS_TOKEN_KEY = "accessToken";
 
 const getAuthToken = async (tokenState) => {
   if (tokenState?.token) return tokenState.token;
 
   try {
     const secure = await withTimeout(loadToken(), 1500, "loadToken");
     if (secure) return secure;
   } catch (error) {
     console.log("[auth] Failed to load secure token", error?.message || error);
   }
 
   try {
     const legacy = await withTimeout(
       AsyncStorage.getItem(LEGACY_ACCESS_TOKEN_KEY),
       1500,
       "loadLegacyToken"
     );
     return legacy || null;
   } catch (error) {
     console.log("[auth] Failed to load legacy token", error?.message || error);
     return null;
   }
 
EOF
)