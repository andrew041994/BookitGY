 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/mobile/App.js b/mobile/App.js
index 25fcef144831fc564d0090d8979008dd6e64f0f1..cc0c145a8e7abb050b13f8a503bb2ae8fb05ba93 100644
--- a/mobile/App.js
+++ b/mobile/App.js
@@ -193,61 +193,63 @@ function extractUsernameFromUrl(url) {
   }
 
   if (!username) return null;
 
   let decoded = username;
   try {
     decoded = decodeURIComponent(username);
   } catch (error) {
     decoded = username;
   }
 
   const cleaned = decoded.trim().replace(/^@/, "");
   if (!cleaned || !isValidUsername(cleaned)) return null;
   return cleaned;
 }
 
 function buildProviderPublicLink(username) {
   const trimmed = String(username || "").trim();
   if (!trimmed) return null;
   return `https://bookitgy.com/u/${encodeURIComponent(trimmed)}`;
 }
 
 function navigateToClientSearch(username, navigationRef, nonce) {
   if (!navigationRef?.current) return false;
 
-  const params = { incomingUsername: username, deeplinkNonce: Date.now() };
-
-  navigationRef.current.reset({
-    index: 1,
-    routes: [
-      { name: "Home" },
-      { name: "Search", params },
-      { name: "Appointments" },
-      { name: "Profile" },
-    ],
-  });
+  const params = { incomingUsername: username, deeplinkNonce: nonce };
+
+  navigationRef.current.dispatch(
+    CommonActions.reset({
+      index: 1,
+      routes: [
+        { name: "Home" },
+        { name: "Search", params },
+        { name: "Appointments" },
+        { name: "Profile" },
+      ],
+    })
+  );
 
   return true;
 }
 
 
 function useFavoriteProviders(userKey) {
   const storageKey = FAVORITES_STORAGE_KEY(userKey);
   const [favoriteIds, setFavoriteIds] = useState([]);
   const [favoriteProviders, setFavoriteProviders] = useState([]);
   const [favoritesLoading, setFavoritesLoading] = useState(true);
 
   const persistIds = useCallback(async (ids) => {
     try {
       await AsyncStorage.setItem(storageKey, JSON.stringify(ids));
     } catch (err) {
       console.log("Error saving favorites", err?.message || err);
     }
   }, [storageKey]);
 
   const loadFavoritesFromStorage = useCallback(async () => {
     try {
       setFavoritesLoading(true);
       const raw = await AsyncStorage.getItem(storageKey);
       const parsed = raw ? JSON.parse(raw) : [];
       setFavoriteIds(Array.isArray(parsed) ? parsed : []);
 
EOF
)