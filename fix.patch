 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/backend/tests/test_booking_lists.py b/backend/tests/test_booking_lists.py
index 7055d3f341aed13fc664168760c6c132a963b86d..ed5f147efad1f7cdd36d01f56b3f7484c8e8ca66 100644
--- a/backend/tests/test_booking_lists.py
+++ b/backend/tests/test_booking_lists.py
@@ -156,50 +156,61 @@ def test_provider_billing_excludes_upcoming_and_cancelled(db_session):
     from app.database import get_db
     from app.routes import bookings as bookings_routes
 
     database.Base.metadata.create_all(bind=database.engine)
 
     def override_get_db():
         try:
             yield session
         finally:
             pass
 
     app.dependency_overrides[get_db] = override_get_db
     app.dependency_overrides[bookings_routes._require_current_provider] = lambda: provider
 
     client = TestClient(app)
 
     try:
         resp = client.get("/providers/me/billing/bookings")
         assert resp.status_code == 200
         data = resp.json()
         returned_ids = {item["id"] for item in data}
         assert in_month_billable.id in returned_ids
         assert cancelled_past.id not in returned_ids
         assert all(item["status"] != "cancelled" for item in data)
         assert all(datetime.fromisoformat(item["end_time"]) <= now for item in data)
+
+        # If a previously billable appointment later gets cancelled, it should
+        # drop out of the billing list on subsequent fetches.
+        in_month_billable.status = "cancelled"
+        session.commit()
+
+        resp = client.get("/providers/me/billing/bookings")
+        assert resp.status_code == 200
+        data = resp.json()
+        returned_ids = {item["id"] for item in data}
+        assert in_month_billable.id not in returned_ids
     finally:
         app.dependency_overrides = {}
 
 
 @pytest.mark.usefixtures("db_session")
 def test_customer_bookings_include_cancelled_and_upcoming(db_session):
     session, models, crud = db_session
     provider, provider_user, customer, service = _create_provider_graph(session, models)
 
     now = datetime.utcnow()
     future_start = now + timedelta(hours=3)
     cancelled_start = now - timedelta(hours=1)
     completed_start = now - timedelta(days=1)
 
     _add_booking(
         session,
         models,
         customer=customer,
         service=service,
         start_time=future_start,
         end_time=future_start + timedelta(hours=1),
         status="confirmed",
     )
 
     _add_booking(
 
EOF
)