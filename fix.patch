 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/frontend/src/main.jsx b/frontend/src/main.jsx
index 8a1a450f56227a17c98c04a5ed8924006c7cb411..c7bf439d08005db7e315bc307a8c96b5e83dff10 100644
--- a/frontend/src/main.jsx
+++ b/frontend/src/main.jsx
@@ -428,50 +428,55 @@ function App() {
           Modern tools for managing providers, bookings, and promotionsâ€”protected behind a secure login.
         </p>
 
         <div className="landing-actions">
           <Link className="primary-btn" to={token ? '/admin/promotions' : '/login'}>
             {token ? 'Go to dashboard' : 'Login'}
           </Link>
           {!token && (
             <p className="credentials-hint">
               Demo login: <strong>customer@guyana.com</strong> / <strong>pass</strong>
             </p>
           )}
         </div>
       </div>
     </div>
   )
 
   const ProtectedRoute = ({ children }) => {
     const location = useLocation()
     if (!token) {
       return <Navigate to="/login" replace state={{ from: location }} />
     }
     return children
   }
 
+  const toCycleMonth = (year, monthNumber) => {
+    const monthValue = String(monthNumber).padStart(2, '0')
+    return `${year}-${monthValue}-01`
+  }
+
   const AdminBilling = () => {
     const location = useLocation()
     const navigate = useNavigate()
     const [billingRows, setBillingRows] = React.useState([])
     const [loading, setLoading] = React.useState(false)
     const [error, setError] = React.useState('')
     const [hasLoaded, setHasLoaded] = React.useState(false)
     const [searchTerm, setSearchTerm] = React.useState('')
     const parseMonthYearFromSearch = React.useCallback((search) => {
       const params = new URLSearchParams(search)
       const cycleParam = params.get('cycle_month')
       if (cycleParam) {
         const match = cycleParam.match(/^(\d{4})-(\d{2})-01$/)
         if (match) {
           const month = Number(match[2])
           const year = Number(match[1])
           if (month >= 1 && month <= 12) {
             return { month, year }
           }
         }
       }
       const rawYear = params.get('year')
       const rawMonth = params.get('month')
       if (rawYear && rawMonth) {
         const month = Number(rawMonth)
@@ -499,79 +504,80 @@ function App() {
         const month = index + 1
         const label = new Date(2000, index, 1).toLocaleDateString(undefined, { month: 'long' })
         return { value: month, label }
       })
     }, [])
 
     const yearOptions = React.useMemo(() => {
       const now = new Date()
       const baseYear = now.getFullYear()
       const years = new Set()
       for (let offset = -3; offset <= 3; offset += 1) {
         years.add(baseYear + offset)
       }
       years.add(selectedYear)
       return Array.from(years).sort((a, b) => a - b)
     }, [selectedYear])
 
     const selectedMonthLabel = React.useMemo(() => {
       const match = monthOptions.find((option) => option.value === selectedMonth)
       if (match) return match.label
       const parsed = new Date(2000, selectedMonth - 1, 1)
       if (Number.isNaN(parsed.getTime())) return String(selectedMonth)
       return parsed.toLocaleDateString(undefined, { month: 'long' })
     }, [selectedMonth, monthOptions])
 
-    const cycleMonth = React.useMemo(() => {
-      const monthValue = String(selectedMonth).padStart(2, '0')
-      return `${selectedYear}-${monthValue}-01`
-    }, [selectedMonth, selectedYear])
+    const cycleMonth = React.useMemo(
+      () => toCycleMonth(selectedYear, selectedMonth),
+      [selectedMonth, selectedYear]
+    )
 
     React.useEffect(() => {
       const parsed = parseMonthYearFromSearch(location.search)
       if (!parsed) return
       setSelectedMonth((prev) => (prev === parsed.month ? prev : parsed.month))
       setSelectedYear((prev) => (prev === parsed.year ? prev : parsed.year))
     }, [location.search, parseMonthYearFromSearch])
 
     React.useEffect(() => {
       const params = new URLSearchParams(location.search)
       params.set('month', String(selectedMonth))
       params.set('year', String(selectedYear))
       params.delete('cycle_month')
       const nextSearch = params.toString()
       const currentSearch = location.search.replace(/^\?/, '')
       if (nextSearch === currentSearch) return
       navigate({ pathname: location.pathname, search: `?${nextSearch}` }, { replace: true })
     }, [location.pathname, location.search, navigate, selectedMonth, selectedYear])
 
-    const fetchBillingRows = React.useCallback(async () => {
+    const fetchBillingRows = React.useCallback(async (cycleMonthOverride) => {
+      const requestedCycleMonth = cycleMonthOverride ?? cycleMonth
       setLoading(true)
       setError('')
       try {
         const res = await apiClient.get('/admin/billing', {
-          params: { cycle_month: cycleMonth },
+          params: { cycle_month: requestedCycleMonth },
         })
         const responseData = res.data
         const hasValidRows =
           Array.isArray(responseData) ||
           Array.isArray(responseData?.providers) ||
           Array.isArray(responseData?.data)
         const responseRows = Array.isArray(responseData)
           ? responseData
           : Array.isArray(responseData?.providers)
             ? responseData.providers
             : Array.isArray(responseData?.data)
               ? responseData.data
               : []
 
         if (!hasValidRows) {
           setError('Unable to load provider billing details. Please refresh and try again.')
           setBillingRows([])
           return
         }
         setBillingRows(responseRows)
       } catch (err) {
         logApiError(err)
         setError('Unable to load provider billing details. Please refresh and try again.')
         setBillingRows([])
       } finally {
@@ -590,50 +596,51 @@ function App() {
         return
       }
 
       if (payingByAccountNumber[accountNumber]) return
 
       setPayingByAccountNumber((prev) => ({ ...prev, [accountNumber]: true }))
       setError('')
 
       try {
         const res = await apiClient.post(
           `/admin/billing/${accountNumber}/mark-paid`,
           { cycle_month: cycleMonth }
         )
         const payload = res?.data
         setBillingRows((prev) =>
           prev.map((row) =>
             row.account_number === accountNumber
               ? {
                 ...row,
                 is_paid: payload?.is_paid ?? true,
                 paid_at: payload?.paid_at ?? row.paid_at,
               }
               : row
           )
         )
+        await fetchBillingRows()
       } catch (err) {
         logApiError(err)
         setError("Failed to update provider billing status.")
       } finally {
         setPayingByAccountNumber((prev) => {
           const next = { ...prev }
           delete next[accountNumber]
           return next
         })
       }
     }
 
     const markAllPaid = async () => {
       if (markAllLoading) return
       setMarkAllLoading(true)
       setError('')
       try {
         await apiClient.post('/admin/billing/mark-all-paid', {
           cycle_month: cycleMonth,
         })
         await fetchBillingRows()
       } catch (err) {
         logApiError(err)
         setError('Failed to update provider billing status.')
       } finally {
 
EOF
)