 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/backend/app/crud.py b/backend/app/crud.py
index 15950122b02b9299e1afed1f7e9d74dae567328f..ca4c00f0b2b56e6dc3bf25bfaf6b11a7c25ef3a0 100644
--- a/backend/app/crud.py
+++ b/backend/app/crud.py
@@ -1143,50 +1143,93 @@ def cancel_booking_for_customer(
 ) -> Optional[models.Booking]:
     """
     Cancel a booking for a given customer.
 
     Returns the updated booking or None if not found / not owned by customer.
     """
     booking = (
         db.query(models.Booking)
         .filter(
             models.Booking.id == booking_id,
             models.Booking.customer_id == customer_id,
         )
         .first()
     )
 
     if not booking:
         return None
 
     # Only allow cancellation from certain states
     if booking.status not in ("confirmed", "pending"):
         return booking  # already cancelled/completed, no-op
 
     booking.status = "cancelled"
     db.commit()
     db.refresh(booking)
+
+    service = (
+        db.query(models.Service)
+        .filter(models.Service.id == booking.service_id)
+        .first()
+    )
+    provider_user = None
+    if service:
+        provider = (
+            db.query(models.Provider)
+            .filter(models.Provider.id == service.provider_id)
+            .first()
+        )
+        if provider:
+            provider_user = (
+                db.query(models.User)
+                .filter(models.User.id == provider.user_id)
+                .first()
+            )
+
+    customer = (
+        db.query(models.User)
+        .filter(models.User.id == booking.customer_id)
+        .first()
+    )
+
+    if provider_user and service and customer:
+        send_whatsapp(
+            provider_user.whatsapp,
+            (
+                "âŒ Booking cancelled by customer.\n"
+                f"{get_display_name(customer)} cancelled {service.name}\n"
+                f"{booking.start_time.strftime('%d %b %Y at %I:%M %p')}"
+            ),
+        )
+
+        send_push(
+            provider_user.expo_push_token,
+            "Booking cancelled",
+            f"{get_display_name(customer)} cancelled {service.name} on "
+            f"{booking.start_time.strftime('%d %b %Y at %I:%M %p')}",
+        )
+
     return booking
 
 
 
 
 def cancel_booking_for_provider(
     db: Session, booking_id: int, provider_id: int
 ) -> bool:
 
     booking = (
         db.query(models.Booking)
         .join(models.Service, models.Booking.service_id == models.Service.id)
         .join(models.Provider, models.Service.provider_id == models.Provider.id)
         .filter(
             models.Booking.id == booking_id,
             models.Provider.id == provider_id,
         )
         .first()
     )
 
     if not booking:
         return False
 
     service = (
         db.query(models.Service)
 
EOF
)