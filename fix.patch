 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/mobile/App.js b/mobile/App.js
index 56a18ace98c059afb4ffa26acd1ad687f1845e72..46240ee54d44f4358a19b0fdcaac26102cdca747 100644
--- a/mobile/App.js
+++ b/mobile/App.js
@@ -1,46 +1,47 @@
 import React, { useState, useEffect, useCallback, useMemo, useRef } from "react";
 import {
   Text,
   View,
   StyleSheet,
   TextInput,
   Button,
   Alert,
   ActivityIndicator,
   ScrollView,
   TouchableOpacity,
   Switch,
   Linking,
   Platform,
   Image,
   KeyboardAvoidingView,
   TouchableWithoutFeedback,
   Keyboard,
   Pressable,
   RefreshControl,
   Share,
+  Modal,
 } from "react-native";
 import * as ExpoLinking from "expo-linking";
 import {
   NavigationContainer,
   CommonActions,
   useFocusEffect,
   useIsFocused,
 } from "@react-navigation/native";
 import { createBottomTabNavigator } from "@react-navigation/bottom-tabs";
 import { enableScreens } from "react-native-screens";
 import axios from "axios";
 import AsyncStorage from "@react-native-async-storage/async-storage";
 import { clearToken, loadToken, saveToken } from "./src/components/tokenStorage";
 import ProviderCard from "./src/components/ProviderCard";
 import { createApiClient } from "./src/api/client";
 import * as Location from "expo-location";
 import Constants from "expo-constants";
 import * as ImagePicker from "expo-image-picker";
 import { Ionicons } from "@expo/vector-icons";
 import {
   SafeAreaProvider,
   SafeAreaView,
   useSafeAreaInsets,
 } from "react-native-safe-area-context";
 import BookitGYLogoTransparent from "./assets/bookitgy-logo-transparent.png"
@@ -1203,50 +1204,77 @@ const ListRow = ({
 
 // Placeholder screens so MainApp compiles â€” replace with your real ones
 function ProfileScreen({ apiClient, authLoading, setToken, showFlash, token }) {
   const [user, setUser] = useState(null);
   const [loading, setLoading] = useState(true);
   const [error, setError] = useState("");
    // NEW state for editing profile
   const [showEdit, setShowEdit] = useState(false);
   const [editSaving, setEditSaving] = useState(false);
   const [editProfile, setEditProfile] = useState({
     full_name: "",
     username: "",
     phone: "",
     whatsapp: "",
     location: "",
   });
   // NEW state for "My bookings"
   const [showBookings, setShowBookings] = useState(false);
   const [bookings, setBookings] = useState([]);
   const [bookingsLoading, setBookingsLoading] = useState(false);
   const [bookingsError, setBookingsError] = useState("");
   const [avatarUrl, setAvatarUrl] = useState(null);
   const [refreshing, setRefreshing] = useState(false);
   const [isProviderUser, setIsProviderUser] = useState(null);
   const canUseClipboard = Boolean(Clipboard?.setStringAsync);
+  const [deleteModalVisible, setDeleteModalVisible] = useState(false);
+  const [deletePassword, setDeletePassword] = useState("");
+  const [deleteLoading, setDeleteLoading] = useState(false);
+
+  const forceLogout = useCallback(
+    async (flashMessage) => {
+      try {
+        await clearToken();
+      } catch (err) {
+        console.log("Error clearing token", err?.message || err);
+      }
+      try {
+        await AsyncStorage.removeItem(LEGACY_ACCESS_TOKEN_KEY);
+      } catch (err) {
+        console.log("Error clearing legacy token", err?.message || err);
+      }
+      setUser(null);
+      setAvatarUrl(null);
+      if (setToken) {
+        setToken(null);
+      }
+      if (flashMessage && showFlash) {
+        showFlash("success", flashMessage);
+      }
+    },
+    [setToken, showFlash]
+  );
 
 
   const uploadAvatar = async (uri) => {
     try {
       const storedToken = await loadToken();
       if (!storedToken) {
         alert("No access token found. Please log in again.");
         return;
       }
 
       const filename = uri.split("/").pop() || "avatar.jpg";
       const match = /\.(\w+)$/.exec(filename);
       const ext = match ? match[1] : "jpg";
       const mimeType = ext === "png" ? "image/png" : "image/jpeg";
 
       const formData = new FormData();
       formData.append("file", {
         uri,
         name: filename,
         type: mimeType,
       });
 
       let isProvider = isProviderUser;
 
       if (typeof isProvider !== "boolean") {
@@ -1316,111 +1344,176 @@ function ProfileScreen({ apiClient, authLoading, setToken, showFlash, token }) {
     await uploadAvatar(asset.uri);
     } catch (err) {
       console.log("Image picker error:", err);
     }
   };
 
 
 
   const logout = async () => {
     try {
       await clearToken();
       if (setToken) {
         setToken(null);
       }
       if (showFlash) {
         showFlash("success", "Logged out successfully");
       }
     } catch (err) {
       console.error("Error during logout", err);
       if (showFlash) {
         showFlash("error", "Could not log out. Please try again.");
       }
     }
   };
 
+  const handleDeleteAccountRequest = () => {
+    Alert.alert(
+      "Delete account?",
+      "This will delete your account and remove all personal data associated with it. Your appointments and billing history may be retained for record-keeping. This action cannot be undone.",
+      [
+        { text: "Cancel", style: "cancel" },
+        {
+          text: "Continue",
+          style: "destructive",
+          onPress: () => {
+            setDeletePassword("");
+            setDeleteModalVisible(true);
+          },
+        },
+      ]
+    );
+  };
+
+  const handleDeleteAccount = async () => {
+    if (deleteLoading) return;
+    const trimmedPassword = deletePassword.trim();
+    if (!trimmedPassword) {
+      if (showFlash) {
+        showFlash("error", "Please enter your password.");
+      }
+      return;
+    }
+    setDeleteLoading(true);
+    try {
+      await apiClient.post("/users/me/delete", {
+        password: trimmedPassword,
+      });
+      setDeleteModalVisible(false);
+      setDeletePassword("");
+      await forceLogout("Account deleted.");
+    } catch (err) {
+      const message =
+        err?.response?.data?.detail ||
+        err?.response?.data?.message ||
+        err?.message ||
+        "Could not delete account.";
+      if (showFlash) {
+        showFlash("error", message);
+      }
+    } finally {
+      setDeleteLoading(false);
+    }
+  };
+
   const loadProfile = useCallback(
     async (useRefresh = false) => {
       try {
         if (useRefresh) setRefreshing(true);
         setLoading(true);
         setError("");
 
         const storedToken = await loadToken();
         console.log("[profile] token present?", Boolean(storedToken));
         if (!storedToken) {
           setError("No access token found. Please log in again.");
           setLoading(false);
           return;
         }
 
         // 1) Load base user info
         const res = await apiClient.get("/users/me");
+        if (
+          res.data?.account_deleted === true ||
+          res.data?.detail === "account_deleted"
+        ) {
+          await forceLogout();
+          return;
+        }
 
         setUser(res.data);
         if (typeof res.data.is_provider === "boolean") {
           setIsProviderUser(res.data.is_provider);
         }
         setEditProfile({
           full_name: res.data.full_name || "",
           username: res.data.username || "",
           phone: res.data.phone || "",
           whatsapp: res.data.whatsapp || "",
           location: res.data.location || "",
         });
 
         // 2) Try to get avatar
         let avatar = res.data.avatar_url || null;
 
         // If this user is a provider, also check provider profile
         if ((token && token.isProvider) || res.data.is_provider) {
           try {
             const provRes = await apiClient.get("/providers/me/profile");
             if (provRes.data.avatar_url) {
               avatar = provRes.data.avatar_url;
             }
           } catch (err) {
             console.log(
               "Error loading provider avatar for profile",
               err.response?.data || err.message
             );
           }
         }
 
         setAvatarUrl(avatar);
       } catch (err) {
+        const shouldForceLogout =
+          err?.response?.status === 401 ||
+          err?.response?.status === 403 ||
+          err?.response?.data?.detail === "account_deleted" ||
+          err?.response?.data?.account_deleted === true;
+        if (shouldForceLogout) {
+          await forceLogout();
+          return;
+        }
         console.error("Error loading profile", err);
         setError("Could not load profile.");
         if (showFlash) {
           showFlash("error", "Could not load profile information.");
         }
       } finally {
         setLoading(false);
         if (useRefresh) setRefreshing(false);
       }
     },
-    [apiClient, showFlash, token]
+    [apiClient, forceLogout, showFlash, token]
   );
 
   useEffect(() => {
     if (authLoading || !token?.token) return;
     loadProfile();
   }, [authLoading, loadProfile, token?.token]);
 
     const toggleEditProfile = () => {
     // ensure form reflects current user
     if (user && !showEdit) {
       setEditProfile({
         full_name: user.full_name || "",
         username: user.username || "",
         phone: user.phone || "",
         whatsapp: user.whatsapp || "",
         location: user.location || "",
       });
     }
     setShowEdit((prev) => !prev);
   };
 
   const saveProfileChanges = async () => {
     try {
       console.log("[profile] save changes pressed");
       setEditSaving(true);
@@ -2041,54 +2134,131 @@ function ProfileScreen({ apiClient, authLoading, setToken, showFlash, token }) {
           />
           <ListRow
             title="Terms of service"
             icon="document-text-outline"
             onPress={() => openExternal("https://bookitgy.com/termsofservice")}
           />
           <ListRow
             title="Privacy policy"
             icon="lock-closed-outline"
             onPress={() => openExternal("https://bookitgy.com/privacy")}
             isLast
           />
         </View>
       </View>
 
       {isAdmin && (
         <View style={styles.adminBox}>
           <Text style={styles.adminTitle}>Admin tools</Text>
           <Text style={styles.adminText}>
             You are logged in as an admin. In future versions, this area will
             let you manage users, providers and bookings.
           </Text>
         </View>
       )}
 
+      <TouchableOpacity
+        style={styles.deleteAccountRow}
+        onPress={handleDeleteAccountRequest}
+      >
+        <Text style={styles.deleteAccountRowText}>Delete account</Text>
+      </TouchableOpacity>
+
       <TouchableOpacity style={styles.logoutRow} onPress={logout}>
         <Text style={styles.logoutRowText}>Logout</Text>
       </TouchableOpacity>
 
+      <Modal
+        transparent
+        animationType="fade"
+        visible={deleteModalVisible}
+        onRequestClose={() => {
+          if (!deleteLoading) {
+            setDeleteModalVisible(false);
+          }
+        }}
+      >
+        <TouchableWithoutFeedback
+          onPress={() => {
+            if (!deleteLoading) {
+              setDeleteModalVisible(false);
+            }
+          }}
+        >
+          <View style={styles.modalOverlay}>
+            <TouchableWithoutFeedback>
+              <KeyboardAvoidingView
+                behavior={Platform.OS === "ios" ? "padding" : undefined}
+                style={styles.modalCard}
+              >
+                <Text style={styles.modalTitle}>Confirm deletion</Text>
+                <Text style={styles.modalMessage}>
+                  Enter your password to delete your account.
+                </Text>
+                <TextInput
+                  style={styles.input}
+                  placeholder="Password"
+                  placeholderTextColor={colors.textSecondary}
+                  secureTextEntry
+                  autoCapitalize="none"
+                  value={deletePassword}
+                  editable={!deleteLoading}
+                  onChangeText={setDeletePassword}
+                />
+                <View style={styles.modalActions}>
+                  <TouchableOpacity
+                    style={[
+                      styles.modalButton,
+                      deleteLoading && styles.modalButtonDisabled,
+                    ]}
+                    onPress={() => setDeleteModalVisible(false)}
+                    disabled={deleteLoading}
+                  >
+                    <Text style={styles.modalButtonText}>Back</Text>
+                  </TouchableOpacity>
+                  <TouchableOpacity
+                    style={[
+                      styles.modalButton,
+                      styles.modalDeleteButton,
+                      deleteLoading && styles.modalButtonDisabled,
+                    ]}
+                    onPress={handleDeleteAccount}
+                    disabled={deleteLoading}
+                  >
+                    {deleteLoading ? (
+                      <ActivityIndicator color={colors.error} />
+                    ) : (
+                      <Text style={styles.modalDeleteButtonText}>Delete</Text>
+                    )}
+                  </TouchableOpacity>
+                </View>
+              </KeyboardAvoidingView>
+            </TouchableWithoutFeedback>
+          </View>
+        </TouchableWithoutFeedback>
+      </Modal>
+
     </ScrollView>
     
   );
   
 }
 
 
 
 function ClientHomeScreen({
   navigation,
   token,
   favoriteProviders,
   favoriteIds,
   favoritesLoading,
   toggleFavorite,
   isFavorite,
   syncFavoritesFromList,
   refreshFavoriteProviders,
   }) {
  const [nearbyProviders, setNearbyProviders] = useState([]);
   const [currentProvider, setCurrentProvider] = useState(null);
   const [nearbyLoading, setNearbyLoading] = useState(true);
   const [nearbyError, setNearbyError] = useState("");
   const [clientLocation, setClientLocation] = useState(null);
   const [locationDenied, setLocationDenied] = useState(false);
@@ -7495,50 +7665,118 @@ cardHeartButton: {
     fontWeight: "500",
     color: colors.textPrimary,
   },
   logoutButton: {
     backgroundColor: "transparent",
     borderColor: colors.error,
     marginTop: 10,
   },
   logoutButtonText: {
     color: colors.error,
   },
   logoutRow: {
     marginTop: 8,
     paddingVertical: 12,
     borderRadius: 12,
     borderWidth: 1,
     borderColor: colors.error,
     backgroundColor: colors.surface,
     alignItems: "center",
   },
   logoutRowText: {
     fontSize: 15,
     fontWeight: "600",
     color: colors.error,
   },
+  deleteAccountRow: {
+    marginTop: 16,
+    paddingVertical: 12,
+    borderRadius: 12,
+    borderWidth: 1,
+    borderColor: colors.error,
+    backgroundColor: "transparent",
+    alignItems: "center",
+  },
+  deleteAccountRowText: {
+    fontSize: 15,
+    fontWeight: "600",
+    color: colors.error,
+  },
+  modalOverlay: {
+    flex: 1,
+    backgroundColor: "rgba(0, 0, 0, 0.65)",
+    justifyContent: "center",
+    padding: 20,
+  },
+  modalCard: {
+    backgroundColor: colors.surface,
+    borderRadius: 16,
+    padding: 20,
+    borderWidth: 1,
+    borderColor: colors.border,
+  },
+  modalTitle: {
+    fontSize: 18,
+    fontWeight: "700",
+    color: colors.textPrimary,
+    marginBottom: 8,
+  },
+  modalMessage: {
+    fontSize: 14,
+    color: colors.textSecondary,
+    marginBottom: 16,
+  },
+  modalActions: {
+    flexDirection: "row",
+    justifyContent: "flex-end",
+    marginTop: 8,
+  },
+  modalButton: {
+    borderWidth: 1,
+    borderColor: colors.border,
+    paddingVertical: 10,
+    paddingHorizontal: 16,
+    borderRadius: 999,
+    marginLeft: 12,
+    alignItems: "center",
+    justifyContent: "center",
+    minWidth: 90,
+  },
+  modalButtonText: {
+    color: colors.textPrimary,
+    fontWeight: "600",
+  },
+  modalDeleteButton: {
+    borderColor: colors.error,
+  },
+  modalDeleteButtonText: {
+    color: colors.error,
+    fontWeight: "700",
+  },
+  modalButtonDisabled: {
+    opacity: 0.6,
+  },
 
   toggleCard: {
     width: "100%",
     flexDirection: "row",
     alignItems: "center",
     justifyContent: "space-between",
     backgroundColor: colors.surface,
     borderWidth: 2,
     borderColor: colors.primary,
     borderRadius: 12,
     paddingVertical: 12,
     paddingHorizontal: 14,
     marginBottom: 16,
     shadowColor: "#000",
     shadowOffset: { width: 0, height: 2 },
     shadowOpacity: 0.1,
     shadowRadius: 4,
     elevation: 3,
   },
   toggleCardPressed: {
     opacity: 0.9,
   },
   toggleTextGroup: {
     flex: 1,
     marginRight: 12,
 
EOF
)