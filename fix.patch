 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/mobile/App.js b/mobile/App.js
index eac559ed6a8b7a76258ae58823d57e3dca57f9b6..b55b109b43341ef9631765a4a57d13b0a117a2c6 100644
--- a/mobile/App.js
+++ b/mobile/App.js
@@ -6937,50 +6937,51 @@ function ProviderBillingScreen({ token, showFlash }) {
               <Text style={styles.billingTotalsValue}>
                 {formatMoney(bill.platform_fee_gyd)}
               </Text>
             </View>
               <View style={styles.billingTotalsRow}>
                 <Text style={styles.billingTotalsLabel}>Bill credits</Text>
                 <Text style={styles.billingTotalsValue}>
                   -{formatMoney(bill.bill_credits_gyd)}
                 </Text>
               </View>
             <View style={styles.billingTotalsRow}>
               <Text style={styles.billingTotalsLabel}>Total due</Text>
               <Text style={styles.billingTotalsValue}>
                 {formatMoney(bill.total_due_gyd)}
               </Text>
             </View>
           </View>
         )})}
     </ScrollView>
   );
 }
 
 
 function DayScheduleGrid({ events, startHour, endHour, renderEvent }) {
   const hourHeight = 145;
+  const pxPerMinute = hourHeight / 60;
   const timeGutterWidth = 56;
   const gridVerticalPadding = 12;
   const startRaw = Number(startHour);
   const endRaw = Number(endHour);
   const gridStart = Number.isFinite(startRaw) ? startRaw : 0;
   const gridEndCandidate = Number.isFinite(endRaw) ? endRaw : 24;
   const gridStartClamped = Math.min(Math.max(gridStart, 0), 23);
   const gridEndClamped = Math.min(Math.max(gridEndCandidate, gridStartClamped + 1), 24);
   const totalHours = gridEndClamped - gridStartClamped;
   const totalHeight = totalHours * hourHeight;
   const trackHeight = totalHeight + gridVerticalPadding * 2;
   const contentHeight = trackHeight;
   const loggedRef = useRef(false);
 
   useEffect(() => {
     if (Platform.OS !== "android" || loggedRef.current) return;
     loggedRef.current = true;
     console.log("[DayScheduleGrid Android debug]", {
       startHour,
       endHour,
       gridStartClamped,
       gridEndClamped,
       totalHours,
       contentHeight,
     });
@@ -6991,77 +6992,77 @@ function DayScheduleGrid({ events, startHour, endHour, renderEvent }) {
     [gridStartClamped, totalHours]
   );
 
   const lineTicks = useMemo(
     () => Array.from({ length: totalHours + 1 }, (_, idx) => gridStartClamped + idx),
     [gridStartClamped, totalHours]
   );
 
   const formatHourLabel = useCallback((hour) => {
     const normalizedHour = ((hour % 24) + 24) % 24;
     const meridiem = normalizedHour >= 12 ? "PM" : "AM";
     const displayHour = normalizedHour % 12 === 0 ? 12 : normalizedHour % 12;
     return `${displayHour}${meridiem}`;
   }, []);
 
   const visibleEvents = useMemo(
     () =>
       (events || []).filter((event) => {
         const rawStatus = String(event?.status?.type || event?.status || event?.state || "").trim().toLowerCase();
         return rawStatus !== "cancelled" && rawStatus !== "canceled";
       }),
     [events]
   );
 
   const positionedEvents = useMemo(() => {
-    const minuteToPx = hourHeight / 60;
     return visibleEvents
       .map((event) => {
         const startDate = event?.startDate || new Date(event?.start);
         const endDate = event?.endDate || new Date(event?.end);
         if (Number.isNaN(startDate.getTime()) || Number.isNaN(endDate.getTime())) return null;
 
-        const startMinutes = startDate.getHours() * 60 + startDate.getMinutes();
-        const endMinutes = endDate.getHours() * 60 + endDate.getMinutes();
         const gridStartMinutes = gridStartClamped * 60;
-        const gridEndMinutes = gridEndClamped * 60;
-        const clampedStart = Math.max(startMinutes, gridStartMinutes);
-        const clampedEnd = Math.min(Math.max(endMinutes, clampedStart + 1), gridEndMinutes);
-        const durationMinutes = Math.max(clampedEnd - clampedStart, 1);
+        const startMinutes = startDate.getHours() * 60 + startDate.getMinutes();
+        const minutesFromStart = startMinutes - gridStartMinutes;
+        const durationMinutes = Math.max(
+          5,
+          Math.round((endDate.getTime() - startDate.getTime()) / 60000)
+        );
 
-        const top = (clampedStart - gridStartMinutes) * minuteToPx + gridVerticalPadding;
-        const height = Math.max(durationMinutes * minuteToPx - 6, 104);
+        const top = minutesFromStart * pxPerMinute + gridVerticalPadding;
+        const height = durationMinutes * pxPerMinute;
 
         return {
           ...event,
           top,
           height,
+          durationMinutes,
         };
       })
-      .filter(Boolean)
+      .filter((event) => event && event.top + event.height >= gridVerticalPadding && event.top <= trackHeight - gridVerticalPadding)
       .sort((a, b) => a.top - b.top);
-  }, [gridEndClamped, gridStartClamped, gridVerticalPadding, hourHeight, visibleEvents]);
+  }, [gridStartClamped, gridVerticalPadding, pxPerMinute, trackHeight, visibleEvents]);
 
   return (
     <ScrollView
       style={styles.providerDayScheduleScroll}
       pointerEvents="auto"
       contentContainerStyle={[
         styles.providerDayScheduleScrollContent,
         Platform.OS === "android" ? { minHeight: contentHeight + gridVerticalPadding * 2 + 24 } : null,
         { paddingTop: gridVerticalPadding, paddingBottom: gridVerticalPadding + 24 },
       ]}
       showsVerticalScrollIndicator={false}
       bounces={false}
       alwaysBounceHorizontal={false}
       horizontal={false}
       nestedScrollEnabled={true}
       scrollEnabled={true}
       keyboardShouldPersistTaps="handled"
       contentInsetAdjustmentBehavior="never"
     >
       <View style={styles.providerDayScheduleRow}>
         <View style={[styles.providerDayScheduleGutter, { width: timeGutterWidth, height: trackHeight }]}>
           {hourTicks.map((hour) => {
             const y = (hour - gridStartClamped) * hourHeight + gridVerticalPadding;
             return (
               <Text key={`label-${hour}`} style={[styles.providerDayScheduleTimeLabel, { top: y + hourHeight / 2 }]}>
@@ -7711,72 +7712,75 @@ function ProviderCalendarScreen({ token, showFlash }) {
   const dayGridEvents = useMemo(
     () =>
       timelineEvents
         .map((event) => {
           const startDate = new Date(event.start);
           const endDate = new Date(event.end);
           if (Number.isNaN(startDate.getTime()) || Number.isNaN(endDate.getTime())) return null;
           return {
             ...event,
             startDate,
             endDate,
           };
         })
         .filter(Boolean),
     [timelineEvents]
   );
 
   const appointmentListData = viewMode === "day" ? [] : sortedSelectedBookings;
   const showAppointmentsEmptyState = viewMode !== "day";
   const getBookingCardKey = useCallback((booking) => {
     if (booking?.id != null) return String(booking.id);
     return `${booking?.booking_id || booking?.id || ""}-${booking?.start_time || booking?.start || ""}`;
   }, []);
 
   const ProviderBookingCard = useCallback(
-    ({ booking, startDate, endDate: _endDate, token: _token, showFlash: _showFlash }) => {
+    ({ booking, startDate, endDate: _endDate, durationMinutes = 60, token: _token, showFlash: _showFlash }) => {
       const bookingId = getBookingId(booking);
       const status = getBookingStatusLabel(booking);
       const statusThemeKey = getAppointmentStatusThemeKey(status?.type || status?.label);
       const statusTheme = APPOINTMENT_STATUS_THEME[statusThemeKey];
       const completed = status.type === "completed";
       const isCancelling = !!(bookingId && cancellingByBookingId[bookingId]);
       const canCancel = isBookingCancellable(booking);
       const parsedStart = startDate instanceof Date
         ? startDate
         : (booking?.start_time ? new Date(booking.start_time) : (booking?.start ? new Date(booking.start) : null));
       const startLabel = parsedStart && !Number.isNaN(parsedStart.getTime())
         ? parsedStart.toLocaleTimeString([], {
             hour: "numeric",
             minute: "2-digit",
           })
         : "--:--";
+      const isShort = durationMinutes < 45;
 
       return (
         <View
           style={[
             styles.providerCalendarRow,
+            styles.providerCalendarRowTimeline,
+            isShort && styles.providerCalendarRowTimelineCompact,
             completed && styles.providerCalendarRowCompleted,
             { borderColor: statusTheme.border, backgroundColor: statusTheme.bgTint },
           ]}
         >
           <View style={[styles.providerCalendarLeftAccentBar, { backgroundColor: statusTheme.accent }]} />
           <View style={{ flex: 1 }}>
             <Text style={styles.providerCalendarTime}>{startLabel}</Text>
             <Text
               style={[
                 styles.providerCalendarService,
                 completed && styles.providerCalendarTextCompleted,
               ]}
             >
               {booking?.service_name || "Service"}
             </Text>
             <Text
               style={[
                 styles.providerCalendarCustomer,
                 completed && styles.providerCalendarTextCompleted,
               ]}
             >
               {booking?.customer_name || "Customer"}
             </Text>
           </View>
           <View style={styles.providerCalendarRightActions}>
@@ -7990,50 +7994,51 @@ function ProviderCalendarScreen({ token, showFlash }) {
                                 weekStartKey={pageWeekStartKey}
                                 selectedDate={selectedDate}
                                 onSelectDate={(dayKey) => setSelectedDate(dayKey)}
                                 bookingsByDate={bookingsByDate}
                                 isBookingCompleted={isBookingCompleted}
                                 colors={colors}
                                 getWeekDays={getWeekDays}
                               />
                             </View>
                           ))}
                         </ScrollView>
                       ) : (
                         <View style={{ flex: 1 }} />
                       )}
                     </View>
                     <View style={styles.providerCalendarViewportDay}>
                       <DayScheduleGrid
                         events={dayGridEvents}
                         startHour={0}
                         endHour={24}
                         renderEvent={(event) => (
                           <ProviderBookingCard
                             booking={event.booking}
                             startDate={event.startDate}
                             endDate={event.endDate}
+                            durationMinutes={event.durationMinutes}
                             token={token}
                             showFlash={showFlash}
                           />
                         )}
                       />
                     </View>
                   </View>
                 )}
                 </View>
               </CalendarProvider>
 
               {loading ? <ActivityIndicator color={colors.primary} style={{ marginTop: 12 }} /> : null}
               {error ? <Text style={styles.errorText}>{error}</Text> : null}
               {viewMode !== "day" ? (
                 <>
                   <View style={{ height: 12 }} />
                   <View style={styles.providerCalendarHeaderBlock}>
                     <Text style={styles.sectionTitle}>Appointments for {selectedDate}</Text>
                   </View>
                 </>
               ) : null}
             </View>
           }
           ListEmptyComponent={
             showAppointmentsEmptyState ? (
@@ -10870,50 +10875,58 @@ signupTextButtonText: {
     flexDirection: "row",
     alignItems: "center",
     justifyContent: "space-between",
     gap: 10,
   },
   providerCalendarListContent: {
     paddingBottom: 24,
   },
   providerCalendarEmpty: {
     color: colors.textMuted,
     marginTop: 10,
     fontSize: 14,
   },
   providerCalendarRow: {
     backgroundColor: colors.surface,
     borderColor: colors.border,
     borderWidth: 1,
     borderRadius: 10,
     paddingHorizontal: 12,
     paddingVertical: 14,
     marginBottom: 8,
     flexDirection: "row",
     alignItems: "flex-start",
     overflow: "hidden",
   },
+  providerCalendarRowTimeline: {
+    height: "100%",
+    marginBottom: 0,
+    paddingVertical: 12,
+  },
+  providerCalendarRowTimelineCompact: {
+    paddingVertical: 8,
+  },
   providerCalendarLeftAccentBar: {
     width: 4,
     borderRadius: 999,
     marginRight: 10,
     alignSelf: "stretch",
   },
   providerCalendarRowCompleted: {
     opacity: 0.75,
   },
   providerCalendarTime: {
     color: colors.textSecondary,
     fontSize: 12,
     marginBottom: 4,
   },
   providerCalendarService: {
     color: colors.textPrimary,
     fontSize: 15,
     fontWeight: "700",
   },
   providerCalendarCustomer: {
     color: colors.textSecondary,
     fontSize: 13,
     marginTop: 2,
   },
   providerCalendarTextCompleted: {
 
EOF
)