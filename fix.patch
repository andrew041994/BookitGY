 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/backend/tests/test_billing.py b/backend/tests/test_billing.py
index 0e99fa99b51ca9648ccf257f4f6691719b74df6e..0c5d5265a15209f7a538f393d152cbb5064bbecd 100644
--- a/backend/tests/test_billing.py
+++ b/backend/tests/test_billing.py
@@ -76,50 +76,74 @@ def test_upcoming_booking_not_billable(db_session):
     assert billable == []
 
 
 def test_cancelled_booking_not_billable(db_session):
     session, models, crud = db_session
     provider, customer, service = _create_provider_graph(session, models)
 
     now = datetime.utcnow()
     start_time = _current_month_past_time(now)
     end_time = start_time + timedelta(hours=1)
 
     _add_booking(
         session,
         models,
         customer=customer,
         service=service,
         start_time=start_time,
         end_time=end_time,
         status="cancelled",
     )
 
     billable = crud.get_billable_bookings_for_provider(session, provider.id, as_of=now)
     assert billable == []
 
 
+def test_cancelled_booking_not_auto_completed(db_session):
+    session, models, crud = db_session
+    provider, customer, service = _create_provider_graph(session, models)
+
+    now = datetime.utcnow()
+    start_time = _current_month_past_time(now) - timedelta(hours=1)
+    end_time = start_time + timedelta(hours=1)
+
+    booking = _add_booking(
+        session,
+        models,
+        customer=customer,
+        service=service,
+        start_time=start_time,
+        end_time=end_time,
+        status="cancelled",
+    )
+
+    crud._auto_complete_finished_bookings(session, as_of=now)
+    session.refresh(booking)
+
+    assert booking.status == "cancelled"
+
+
 def test_completed_booking_counts_toward_fees(db_session):
     session, models, crud = db_session
     provider, customer, service = _create_provider_graph(session, models)
 
     now = datetime.utcnow()
     start_time = _current_month_past_time(now)
     end_time = start_time + timedelta(hours=1)
 
     _add_booking(
         session,
         models,
         customer=customer,
         service=service,
         start_time=start_time,
         end_time=end_time,
         status="completed",
     )
 
     # Add noise bookings that shouldn't count
     future_start = now + timedelta(days=1)
     future_end = future_start + timedelta(hours=1)
     _add_booking(
         session,
         models,
         customer=customer,
 
EOF
)