 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/mobile/App.js b/mobile/App.js
index 1a5d02dc87a97c57712ed60724c3708a5f8706d0..6b431440361234905f9dca3d31c219720c561dd3 100644
--- a/mobile/App.js
+++ b/mobile/App.js
@@ -1,47 +1,48 @@
 import React, { useState, useEffect, useCallback, useMemo, useRef } from "react";
 import {
   Text,
   View,
   StyleSheet,
   TextInput,
   Button,
   Alert,
   ActivityIndicator,
   ScrollView,
   TouchableOpacity,
   Switch,
   Linking,
   Platform,
   Image,
   KeyboardAvoidingView,
   TouchableWithoutFeedback,
   Keyboard,
   Pressable,
   RefreshControl,
   Share,
   Modal,
+  FlatList,
 } from "react-native";
 import * as ExpoLinking from "expo-linking";
 import {
   NavigationContainer,
   CommonActions,
   useFocusEffect,
   useIsFocused,
 } from "@react-navigation/native";
 import { createBottomTabNavigator } from "@react-navigation/bottom-tabs";
 import { enableScreens } from "react-native-screens";
 import axios from "axios";
 import AsyncStorage from "@react-native-async-storage/async-storage";
 import { clearToken, loadToken, saveToken } from "./src/components/tokenStorage";
 import ProviderCard from "./src/components/ProviderCard";
 import { createApiClient } from "./src/api/client";
 import * as Location from "expo-location";
 import Constants from "expo-constants";
 import * as ImagePicker from "expo-image-picker";
 import { Ionicons } from "@expo/vector-icons";
 import {
   CalendarProvider,
   Calendar,
   WeekCalendar,
 } from "react-native-calendars";
 import {
@@ -6880,50 +6881,57 @@ function ProviderCalendarScreen({ token, showFlash }) {
       const grouped = rows.reduce((acc, booking) => {
         const key = formatDayKey(booking?.start_time);
         if (!key) return acc;
         if (!acc[key]) acc[key] = [];
         acc[key].push(booking);
         return acc;
       }, {});
 
       setBookingsByDate(grouped);
     } catch (err) {
       console.log("Error loading provider calendar bookings", err?.response?.data || err?.message || err);
       setError("Could not load calendar bookings.");
       if (showFlash) {
         showFlash("error", "Could not load calendar bookings.");
       }
     } finally {
       setLoading(false);
     }
   }, [dateRange.end, dateRange.start, formatDayKey, showFlash, token]);
 
   useEffect(() => {
     loadBookingsForRange();
   }, [loadBookingsForRange]);
 
   const selectedBookings = useMemo(() => bookingsByDate[selectedDate] || [], [bookingsByDate, selectedDate]);
+  const sortedSelectedBookings = useMemo(
+    () =>
+      selectedBookings
+        .slice()
+        .sort((a, b) => new Date(a?.start_time || a?.start) - new Date(b?.start_time || b?.start)),
+    [selectedBookings]
+  );
 
   const formatTimelineTime = useCallback((isoDateLike) => {
     const parsed = new Date(isoDateLike);
     if (Number.isNaN(parsed.getTime())) return "--:--";
     const hh = String(parsed.getHours()).padStart(2, "0");
     const mm = String(parsed.getMinutes()).padStart(2, "0");
     return `${hh}:${mm}`;
   }, []);
 
   const getEventAccentColor = useCallback((booking) => {
     const palette = [colors.primary, "#1CA7A8", "#4C8BF5", "#8A63D2"];
     const hashSource = String(booking?.service_id || booking?.service_name || "service");
     const hash = Array.from(hashSource).reduce((acc, ch) => acc + ch.charCodeAt(0), 0);
     return palette[hash % palette.length];
   }, []);
 
   const markedDates = useMemo(() => {
     const marked = {};
 
     Object.keys(bookingsByDate).forEach((day) => {
       const dayBookings = bookingsByDate[day] || [];
       if (!dayBookings.length) return;
       const allCompleted = dayBookings.every((b) => isBookingCompleted(b));
       marked[day] = {
         marked: true,
@@ -7073,170 +7081,179 @@ function ProviderCalendarScreen({ token, showFlash }) {
           <View style={styles.providerCalendarTopArea}>
             <CalendarProvider date={selectedDate} onDateChanged={onSelectDate}>
               <View style={styles.providerCalendarCard}>
               {viewMode === "month" ? (
                 <View
                   style={[
                     styles.providerCalendarViewport,
                     styles.providerCalendarViewportMonth,
                   ]}
                 >
                   <Calendar
                     current={selectedDate}
                     markedDates={markedDates}
                     onDayPress={onSelectDate}
                     theme={calendarTheme}
                   />
                 </View>
               ) : viewMode === "week" ? (
                 <View
                   style={[
                     styles.providerCalendarViewport,
                     styles.providerCalendarViewportWeek,
                   ]}
                   onLayout={(event) => {
                     const width = Math.round(event?.nativeEvent?.layout?.width || 0);
-                    if (width > 0 && width !== weekPagerWidth) {
+                    if (width > 0 && weekPagerWidth === 0) {
                       setWeekPagerWidth(width);
                     }
                   }}
                 >
-                  <ScrollView
-                    ref={weekPagerRef}
-                    horizontal
-                    pagingEnabled
-                    showsHorizontalScrollIndicator={false}
-                    onMomentumScrollEnd={onWeekPagerMomentumEnd}
-                    contentOffset={{ x: weekPagerWidth, y: 0 }}
-                  >
-                    {weekPages.map((pageWeekStartKey) => (
-                      <View key={pageWeekStartKey} style={{ width: weekPagerWidth || undefined }}>
-                        <WeeklyStrip
-                          weekStartKey={pageWeekStartKey}
-                          selectedDate={selectedDate}
-                          onSelectDate={(dayKey) => setSelectedDate(dayKey)}
-                          bookingsByDate={bookingsByDate}
-                          isBookingCompleted={isBookingCompleted}
-                          colors={colors}
-                          getWeekDays={getWeekDays}
-                        />
-                      </View>
-                    ))}
-                  </ScrollView>
+                  {weekPagerWidth > 0 ? (
+                    <ScrollView
+                      ref={weekPagerRef}
+                      horizontal
+                      pagingEnabled
+                      showsHorizontalScrollIndicator={false}
+                      onMomentumScrollEnd={onWeekPagerMomentumEnd}
+                      contentOffset={{ x: weekPagerWidth, y: 0 }}
+                      nestedScrollEnabled={false}
+                      directionalLockEnabled={true}
+                      alwaysBounceVertical={false}
+                      alwaysBounceHorizontal={true}
+                      scrollEventThrottle={16}
+                    >
+                      {weekPages.map((pageWeekStartKey) => (
+                        <View key={pageWeekStartKey} style={{ width: weekPagerWidth }}>
+                          <WeeklyStrip
+                            weekStartKey={pageWeekStartKey}
+                            selectedDate={selectedDate}
+                            onSelectDate={(dayKey) => setSelectedDate(dayKey)}
+                            bookingsByDate={bookingsByDate}
+                            isBookingCompleted={isBookingCompleted}
+                            colors={colors}
+                            getWeekDays={getWeekDays}
+                          />
+                        </View>
+                      ))}
+                    </ScrollView>
+                  ) : (
+                    <View style={{ flex: 1 }} />
+                  )}
                 </View>
               ) : (
                 // Daily layout structure: WeekCalendar strip -> custom vertical day schedule grid.
                 <View style={styles.providerCalendarDailyLayout}>
                   <View style={styles.providerCalendarDayStrip}>
                     <WeekCalendar
                       firstDay={0}
                       current={selectedDate}
                       markedDates={markedDates}
                       onDayPress={onSelectDate}
                       theme={calendarTheme}
                     />
                   </View>
                   <View style={styles.providerCalendarViewportDay}>
                     <DayScheduleGrid events={dayGridEvents} startHour={0} endHour={24} />
                   </View>
                 </View>
               )}
               </View>
             </CalendarProvider>
           </View>
         </View>
 
         {loading ? <ActivityIndicator color={colors.primary} style={{ marginTop: 12 }} /> : null}
         {error ? <Text style={styles.errorText}>{error}</Text> : null}
         {!loading && !error && viewMode !== "day" ? (
           <View style={styles.providerCalendarBottomArea}>
             <View style={styles.providerCalendarHeaderBlock}>
               <Text style={styles.sectionTitle}>Appointments for {selectedDate}</Text>
             </View>
             <View style={styles.providerCalendarListSection}>
-              <ScrollView
+              <FlatList
                 style={styles.providerCalendarList}
+                data={sortedSelectedBookings}
+                keyExtractor={(booking) =>
+                  String(
+                    booking?.id ||
+                      booking?.booking_id ||
+                      `${booking?.start_time || booking?.start}-${booking?.service_name || "service"}`
+                  )
+                }
+                renderItem={({ item: booking }) => {
+                  const completed = isBookingCompleted(booking);
+                  const startIso = booking?.start_time || booking?.start;
+                  const startLabel = startIso
+                    ? new Date(startIso).toLocaleTimeString([], {
+                        hour: "numeric",
+                        minute: "2-digit",
+                      })
+                    : "--:--";
+
+                  return (
+                    <View
+                      style={[
+                        styles.providerCalendarRow,
+                        completed && styles.providerCalendarRowCompleted,
+                      ]}
+                    >
+                      <View style={{ flex: 1 }}>
+                        <Text style={styles.providerCalendarTime}>{startLabel}</Text>
+                        <Text
+                          style={[
+                            styles.providerCalendarService,
+                            completed && styles.providerCalendarTextCompleted,
+                          ]}
+                        >
+                          {booking?.service_name || "Service"}
+                        </Text>
+                        <Text
+                          style={[
+                            styles.providerCalendarCustomer,
+                            completed && styles.providerCalendarTextCompleted,
+                          ]}
+                        >
+                          {booking?.customer_name || "Customer"}
+                        </Text>
+                      </View>
+                      {completed ? (
+                        <View style={styles.providerCalendarCompletedBadge}>
+                          <Text style={styles.providerCalendarCompletedText}>Completed</Text>
+                        </View>
+                      ) : null}
+                    </View>
+                  );
+                }}
+                ListEmptyComponent={
+                  <Text style={styles.providerCalendarEmpty}>No appointments for this date.</Text>
+                }
                 contentContainerStyle={styles.providerCalendarListContent}
                 showsVerticalScrollIndicator={false}
-              >
-                {selectedBookings.length === 0 ? (
-                  <Text style={styles.providerCalendarEmpty}>No appointments for this date.</Text>
-                ) : (
-                  <>
-                    {selectedBookings
-                      .slice()
-                      .sort((a, b) => new Date(a?.start_time || a?.start) - new Date(b?.start_time || b?.start))
-                      .map((booking) => {
-                        const completed = isBookingCompleted(booking);
-                        const startIso = booking?.start_time || booking?.start;
-                        const startLabel = startIso
-                          ? new Date(startIso).toLocaleTimeString([], {
-                              hour: "numeric",
-                              minute: "2-digit",
-                            })
-                          : "--:--";
-
-                        return (
-                          <View
-                            key={String(
-                              booking?.id || booking?.booking_id || `${startIso}-${booking?.service_name || "service"}`
-                            )}
-                            style={[
-                              styles.providerCalendarRow,
-                              completed && styles.providerCalendarRowCompleted,
-                            ]}
-                          >
-                            <View style={{ flex: 1 }}>
-                              <Text style={styles.providerCalendarTime}>{startLabel}</Text>
-                              <Text
-                                style={[
-                                  styles.providerCalendarService,
-                                  completed && styles.providerCalendarTextCompleted,
-                                ]}
-                              >
-                                {booking?.service_name || "Service"}
-                              </Text>
-                              <Text
-                                style={[
-                                  styles.providerCalendarCustomer,
-                                  completed && styles.providerCalendarTextCompleted,
-                                ]}
-                              >
-                                {booking?.customer_name || "Customer"}
-                              </Text>
-                            </View>
-                            {completed ? (
-                              <View style={styles.providerCalendarCompletedBadge}>
-                                <Text style={styles.providerCalendarCompletedText}>Completed</Text>
-                              </View>
-                            ) : null}
-                          </View>
-                        );
-                      })}
-                  </>
-                )}
-              </ScrollView>
+                removeClippedSubviews={true}
+                keyboardShouldPersistTaps="handled"
+              />
             </View>
           </View>
         ) : null}
       </View>
     </SafeAreaView>
   );
 }
 
 // Tabs after login
 function MainApp({
   apiClient,
   authLoading,
   token,
   setToken,
   showFlash,
   navigationRef,
   setNavReady,
 }) {
   const {
     favoriteIds,
     favoriteProviders,
     favoritesLoading,
     toggleFavorite,
     isFavorite,
     syncFavoritesFromList,
@@ -9696,101 +9713,96 @@ signupTextButtonText: {
   },
 
     searchCatalogStrip: {
     marginTop: 8,
     marginBottom: 8,
   },
   searchCatalogImage: {
     width: 140,
     height: 180,
     borderRadius: 8,
     marginRight: 8,
     backgroundColor: colors.surfaceElevated,
   },
 
   providerCalendarScreen: {
     flex: 1,
     backgroundColor: colors.background,
   },
   providerCalendarContentContainer: {
     flex: 1,
     paddingHorizontal: 16,
     paddingTop: 8,
     paddingBottom: 12,
   },
   providerCalendarTop: {
-    zIndex: 10,
-    elevation: 10,
+    flexShrink: 0,
   },
   providerCalendarTopArea: {
     flexShrink: 0,
   },
   providerCalendarModeSwitch: {
     flexDirection: "row",
     backgroundColor: colors.surface,
     borderWidth: 1,
     borderColor: colors.border,
     borderRadius: 12,
     overflow: "hidden",
     marginBottom: 12,
   },
   providerCalendarModeButton: {
     flex: 1,
     paddingVertical: 10,
     alignItems: "center",
   },
   providerCalendarModeButtonActive: {
     backgroundColor: colors.primarySoft,
   },
   providerCalendarModeText: {
     color: colors.textSecondary,
     fontWeight: "600",
     fontSize: 13,
   },
   providerCalendarModeTextActive: {
     color: colors.textPrimary,
   },
   providerCalendarCard: {
     backgroundColor: colors.surface,
     borderWidth: 1,
     borderColor: colors.border,
     borderRadius: 14,
     padding: 8,
-    position: "relative",
-    zIndex: 10,
-    elevation: 10,
   },
   providerCalendarViewport: {
     overflow: "hidden",
     borderRadius: 10,
   },
   providerCalendarViewportMonth: {
     height: 360,
   },
   providerCalendarViewportWeek: {
     height: 168,
-    paddingTop: 4,
     overflow: "hidden",
   },
   providerWeeklyStrip: {
     width: "100%",
     paddingVertical: 10,
   },
   providerWeeklyRow: {
     flexDirection: "row",
     width: "100%",
     paddingHorizontal: 8,
   },
   providerWeeklyCell: {
     flex: 1,
     alignItems: "center",
     justifyContent: "center",
   },
   providerWeeklyDow: {
     color: colors.textSecondary,
     fontSize: 13,
     fontWeight: "600",
     marginBottom: 10,
   },
   providerWeeklyDayWrap: {
     width: 36,
     height: 36,
 
EOF
)