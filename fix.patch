 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/backend/app/crud.py b/backend/app/crud.py
index 24bd0d08db25bdf92d708c7cb633be52b58250a0..2b473a79e9129d3ab5f3ae72ac2c9a95c7eec337 100644
--- a/backend/app/crud.py
+++ b/backend/app/crud.py
@@ -914,51 +914,51 @@ from decimal import Decimal
 from app.config import get_settings
 from app import models
 # get_provider_credit_balance should already be defined in this file
 
 
 def _billable_bookings_base_query(
     db: Session, provider_id: int, as_of: datetime | None = None
 ):
     """Return a base query for bookings that are eligible for billing.
 
     Eligibility rules (applied consistently across billing calculations):
     - Booking is NOT cancelled.
     - Booking has ended.
     - Appointment end time is on or before the cutoff.
     """
 
     cutoff = as_of or datetime.utcnow()
 
     return (
         db.query(models.Booking, models.Service, models.User)
         .join(models.Service, models.Booking.service_id == models.Service.id)
         .join(models.Provider, models.Service.provider_id == models.Provider.id)
         .join(models.User, models.Booking.customer_id == models.User.id)
         .filter(
             models.Provider.id == provider_id,
-            models.Booking.status != "cancelled",
+            models.Booking.status.notin_({"cancelled", "canceled"}),
             models.Booking.end_time.isnot(None),
             models.Booking.end_time <= cutoff,
         )
     )
 
 
 def _billing_period_bounds(reference: datetime) -> tuple[datetime, datetime]:
     """Return start/end datetimes covering the month containing ``reference``."""
 
     start = datetime(reference.year, reference.month, 1)
     if reference.month == 12:
         end = datetime(reference.year + 1, 1, 1)
     else:
         end = datetime(reference.year, reference.month + 1, 1)
 
     return start, end
 
 
 def get_provider_fees_due(db: Session, provider_id: int) -> float:
     """
     Compute the *current month's* amount due for this provider in GYD,
     using only completed (ended) and non-cancelled bookings.
 
     Logic:
     - Look at bookings that have ended (end_time <= now) and are not cancelled,
 
EOF
)