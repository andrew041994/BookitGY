 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/mobile/App.js b/mobile/App.js
index 96cb54705a98c1337d88d29b4a8bbd6d629892f6..491ab595da4f9097e51d1bac8faaccf65aa0bf29 100644
--- a/mobile/App.js
+++ b/mobile/App.js
@@ -167,51 +167,55 @@ const createLinkingConfig = ({ isProvider }) => ({
   const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
   return emailRegex.test(trimmed);
 };
 
 const resolveImageUrl = (url) => {
     if (!url || typeof url !== "string") return null;
     if (url.startsWith("http")) return url;
     if (url.startsWith("//")) return `https:${url}`;
     const normalizedPath = url.startsWith("/") ? url : `/${url}`;
     return `${API}${normalizedPath}`;
   };
 
 const LEGACY_ACCESS_TOKEN_KEY = "accessToken";
 
 const getAuthToken = async (tokenState) => {
   if (tokenState?.token) return tokenState.token;
 
   try {
     const secure = await withTimeout(loadToken(), 1500, "loadToken");
     if (secure) return secure;
   } catch (error) {
     console.log("[auth] Failed to load secure token", error?.message || error);
   }
 
   try {
-    const legacy = await AsyncStorage.getItem(LEGACY_ACCESS_TOKEN_KEY);
+    const legacy = await withTimeout(
+      AsyncStorage.getItem(LEGACY_ACCESS_TOKEN_KEY),
+      1500,
+      "loadLegacyToken"
+    );
     return legacy || null;
   } catch (error) {
     console.log("[auth] Failed to load legacy token", error?.message || error);
     return null;
   }
 };
 
 const FAVORITES_STORAGE_KEY = (userKey) =>
   userKey ? `favoriteProviders:${userKey}` : "favoriteProviders";
 
 const getProviderId = (provider) =>
   provider?.provider_id ?? provider?.id ?? provider?._id ?? null;
 
 function useFavoriteProviders(userKey) {
   const storageKey = FAVORITES_STORAGE_KEY(userKey);
   const [favoriteIds, setFavoriteIds] = useState([]);
   const [favoriteProviders, setFavoriteProviders] = useState([]);
   const [favoritesLoading, setFavoritesLoading] = useState(true);
 
   const persistIds = useCallback(async (ids) => {
     try {
       await AsyncStorage.setItem(storageKey, JSON.stringify(ids));
     } catch (err) {
       console.log("Error saving favorites", err?.message || err);
     }
@@ -6083,52 +6087,71 @@ function App() {
             const meRes = await withTimeout(
               bootstrapClient.get(`${API}/users/me`, {
                 headers: {
                   Authorization: `Bearer ${restoredToken}`,
                 },
               }),
               12000,
               "/users/me"
             );
             if (isActive) {
               setToken({
                 token: restoredToken,
                 userId: meRes.data?.id || meRes.data?.user_id,
                 email: meRes.data?.email,
                 isProvider: Boolean(meRes.data?.is_provider),
                 isAdmin: Boolean(meRes.data?.is_admin),
               });
               setIsAdmin(Boolean(meRes.data?.is_admin));
             }
           } catch (err) {
             console.log(
               "[auth] Failed to load user info during bootstrap",
               err?.message || err
             );
             if (err?.response?.status === 401 || err?.response?.status === 403) {
-              await clearToken();
-              await AsyncStorage.removeItem(LEGACY_ACCESS_TOKEN_KEY);
+              try {
+                await withTimeout(clearToken(), 1500, "clearToken");
+              } catch (storageError) {
+                console.log(
+                  "[auth] Failed to clear secure token",
+                  storageError?.message || storageError
+                );
+              }
+
+              try {
+                await withTimeout(
+                  AsyncStorage.removeItem(LEGACY_ACCESS_TOKEN_KEY),
+                  1500,
+                  "clearLegacyToken"
+                );
+              } catch (storageError) {
+                console.log(
+                  "[auth] Failed to clear legacy token",
+                  storageError?.message || storageError
+                );
+              }
               if (isActive) setToken(null);
             } else if (isActive) {
               setToken({ token: restoredToken });
             }
           }
         }
       } catch (err) {
         console.log(
           "[auth] Failed to restore session",
           err?.message || err
         );
         if (isActive) setToken(null);
       } finally {
         if (isActive) setAuthLoading(false);
       }
     };
 
     restoreSession();
 
     return () => {
       isActive = false;
     };
   }, []);
 
   useEffect(() => {
 
EOF
)