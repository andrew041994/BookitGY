 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/mobile/App.js b/mobile/App.js
index 77b2c0311f07d4e6826020649a79eb2631632bba..e60cbb0491776c957c65dd708de6c7aa7b36bda9 100644
--- a/mobile/App.js
+++ b/mobile/App.js
@@ -19,82 +19,87 @@ import { SafeAreaProvider,SafeAreaView } from "react-native-safe-area-context";
 
 
 
 // import { API } from "./App"; // wherever you define your base URL
 
 
 
 
   const API = "https://cecila-opalescent-compulsorily.ngrok-free.dev";
   console.log("### API base URL =", API);
 
   const isValidEmail = (value) => {
   const trimmed = value.trim();
   const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
   return emailRegex.test(trimmed);
 };
 
   const resolveImageUrl = (url) => {
     if (!url || typeof url !== "string") return null;
     if (url.startsWith("http")) return url;
     if (url.startsWith("//")) return `https:${url}`;
     const normalizedPath = url.startsWith("/") ? url : `/${url}`;
     return `${API}${normalizedPath}`;
   };
 
-  const FAVORITES_STORAGE_KEY = "favoriteProviders";
+  const FAVORITES_STORAGE_KEY = (userKey) =>
+    userKey ? `favoriteProviders:${userKey}` : "favoriteProviders";
 
 const getProviderId = (provider) =>
   provider?.provider_id ?? provider?.id ?? provider?._id ?? null;
 
-function useFavoriteProviders() {
+function useFavoriteProviders(userKey) {
+  const storageKey = FAVORITES_STORAGE_KEY(userKey);
   const [favoriteIds, setFavoriteIds] = useState([]);
   const [favoriteProviders, setFavoriteProviders] = useState([]);
   const [favoritesLoading, setFavoritesLoading] = useState(true);
 
   const persistIds = useCallback(async (ids) => {
     try {
-      await AsyncStorage.setItem(FAVORITES_STORAGE_KEY, JSON.stringify(ids));
+      await AsyncStorage.setItem(storageKey, JSON.stringify(ids));
     } catch (err) {
       console.log("Error saving favorites", err?.message || err);
     }
-  }, []);
+  }, [storageKey]);
 
   const loadFavoritesFromStorage = useCallback(async () => {
     try {
-      const raw = await AsyncStorage.getItem(FAVORITES_STORAGE_KEY);
+      setFavoritesLoading(true);
+      const raw = await AsyncStorage.getItem(storageKey);
       const parsed = raw ? JSON.parse(raw) : [];
       setFavoriteIds(Array.isArray(parsed) ? parsed : []);
     } catch (err) {
       console.log("Error reading favorites", err?.message || err);
       setFavoriteIds([]);
     } finally {
       setFavoritesLoading(false);
     }
-  }, []);
+  }, [storageKey]);
 
   useEffect(() => {
+    setFavoriteIds([]);
+    setFavoriteProviders([]);
     loadFavoritesFromStorage();
   }, [loadFavoritesFromStorage]);
 
   const syncFavoritesFromList = useCallback(
     (list) => {
       if (!Array.isArray(list)) return;
 
       setFavoriteProviders((prev) => {
         const idSet = new Set(favoriteIds);
         const merged = list.filter((p) => idSet.has(getProviderId(p)));
 
         const prevMap = new Map(
           prev.map((p) => [getProviderId(p), p]).filter(([id]) => idSet.has(id))
         );
 
         merged.forEach((p) => {
           const id = getProviderId(p);
           if (id) prevMap.set(id, p);
         });
 
         return Array.from(prevMap.values());
       });
     },
     [favoriteIds]
   );
@@ -5300,51 +5305,51 @@ function ProviderBillingScreen({ token, showFlash }) {
               <Text style={styles.billingTotalsValue}>
                 {formatMoney(bill.platformFee)}
               </Text>
             </View>
             <View style={styles.billingTotalsRow}>
               <Text style={styles.billingTotalsLabel}>Total due</Text>
               <Text style={styles.billingTotalsValue}>{formatMoney(bill.totalDue)}</Text>
             </View>
           </View>
         ))}
     </ScrollView>
   );
 }
 
 
 // Tabs after login
 function MainApp({ token, setToken, showFlash }) {
    const {
     favoriteIds,
     favoriteProviders,
     favoritesLoading,
     toggleFavorite,
     isFavorite,
     syncFavoritesFromList,
     refreshFavoriteProviders,
-  } = useFavoriteProviders();
+  } = useFavoriteProviders(token?.email || token?.userId);
   return (
     <NavigationContainer>
       {token.isProvider ? (
         // ðŸ‘‡ Provider view: Dashboard + Billing + Profile
         <Tab.Navigator
           initialRouteName="Dashboard"
           screenOptions={({ route }) => ({
             headerShown: false,
             tabBarShowLabel: true,
             tabBarActiveTintColor: "#0B6BF2",
             tabBarInactiveTintColor: "#A1A1A1",
             tabBarStyle: {
               backgroundColor: "#FFFFFF",
               height: 70,
               paddingBottom: 25,
               paddingTop: 8,
               borderTopWidth: 0,
               shadowColor: "#000",
               shadowOpacity: 0.05,
               shadowRadius: 8,
               elevation: 4,
               marginBottom: Platform.OS === "android" ? 8 : 0,
             },
             tabBarIcon: ({ color }) => {
               let iconName = "home-outline";
 
EOF
)