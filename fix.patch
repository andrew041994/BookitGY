diff --git a/App.js b/App.js
index 0000000..0000000 100644
--- a/App.js
+++ b/App.js
@@ -1,5 +1,6 @@
 import React, { useState, useEffect, useCallback } from "react";
 import { useFocusEffect } from "@react-navigation/native";
+// ... keep other imports as-is

@@
 function ProfileScreen({ setToken, showFlash, token }) {
   const [user, setUser] = useState(null);
@@
   const [avatarUrl, setAvatarUrl] = useState(null);
   const [refreshing, setRefreshing] = useState(false);

-  const uploadAvatar = async (uri) => {
-    try{
-      const token = await AsyncStorage.getItem("accessToken");
-      if (!token) {
-        alert("No access token found. Please log in again.");
-        return;
-      }
-
-      const filename = uri.split("/").pop() || "avatar.jpg";
-      const match = /\.(\w+)$/.exec(filename);
-      const ext = match ? match[1] : "jpg";
-      const mimeType = ext === "png" ? "image/png" : "image/jpeg";
-
-      const formData = new FormData();
-      formData.append("file", {
-        uri,
-        name: filename,
-        type: mimeType,
-      });
-
-      const res = await axios.post(`${API}/users/me/avatar`, formData, {
-        headers: {
-          "Content-Type": "multipart/form-data",
-          Authorization: `Bearer ${token}`,
-        },
-        });
-
-      const newUrl = res.data.avatar_url;
-
-        // update avatar in this screen
-        setAvatarUrl(newUrl);
-        setUser((prev) =>
-          prev ? { ...prev, avatar_url: newUrl } : prev
-        );
-      } catch (err) {
-        console.log(
-          "Avatar upload error:",
-          err.response?.data || err.message
-        );
-        alert("Failed to upload avatar. Please try again.");
-      }
-    };
+  const uploadAvatar = async (uri) => {
+    try {
+      const tokenStr = await AsyncStorage.getItem("accessToken");
+      if (!tokenStr) {
+        alert("No access token found. Please log in again.");
+        return;
+      }
+
+      const filename = uri.split("/").pop() || "avatar.jpg";
+      const match = /\.(\w+)$/.exec(filename);
+      const ext = match ? match[1].toLowerCase() : "jpg";
+      const mimeType = ext === "png" ? "image/png" : "image/jpeg";
+
+      const formData = new FormData();
+      formData.append("file", { uri, name: filename, type: mimeType });
+
+      // Default to client endpoint
+      let endpoint = `${API}/users/me/avatar`;
+
+      // If logged-in user is a provider, upload to provider avatar endpoint
+      try {
+        const meRes = await axios.get(`${API}/users/me`, {
+          headers: { Authorization: `Bearer ${tokenStr}` },
+        });
+        if (meRes.data?.is_provider) {
+          endpoint = `${API}/providers/me/avatar`;
+        }
+      } catch (e) {
+        console.log(
+          "Could not determine user type for avatar upload; using /users/me/avatar",
+          e.response?.data || e.message
+        );
+      }
+
+      const res = await axios.post(endpoint, formData, {
+        headers: {
+          "Content-Type": "multipart/form-data",
+          Authorization: `Bearer ${tokenStr}`,
+        },
+      });
+
+      const newUrl = res.data?.avatar_url || null;
+
+      // Update local UI immediately
+      setAvatarUrl(newUrl);
+      setUser((prev) => (prev ? { ...prev, avatar_url: newUrl } : prev));
+    } catch (err) {
+      console.log("Avatar upload error:", err.response?.data || err.message);
+      alert("Failed to upload avatar. Please try again.");
+    }
+  };

@@
   return (
     <ScrollView
       contentContainerStyle={styles.profileScroll}
       refreshControl={
         <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />
       }
     >
       <View style={styles.profileHeader}>
         {/* Avatar */}
         <View style={{ alignItems: "center", marginBottom: 16 }}>
           <View style={styles.profileAvatarWrapper}>
-            {user?.avatar_url ? (
+            {avatarUrl ? (
               <Image
-                source={{ uri: user.avatar_url }}
+                source={{ uri: avatarUrl }}
                 style={{ width: "100%", height: "100%" }}
                 resizeMode="cover"
               />
             ) : (
               <View style={styles.profileAvatarFallback}>
                 <Text style={styles.profileAvatarInitial}>
                   {(user.full_name || user.email || "C").charAt(0).toUpperCase()}
                 </Text>
               </View>
             )}
           </View>
